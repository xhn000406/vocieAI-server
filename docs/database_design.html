<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå®æ—¶è¯­éŸ³è½¬å†™åº”ç”¨ - æ•°æ®åº“ERå›¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
            overflow: hidden;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            color: #666;
            font-size: 1em;
        }

        .controls {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .controls button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .controls button:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .canvas-container {
            position: relative;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            height: calc(100vh - 200px);
        }

        #canvas {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: auto;
            background: #f8f9fa;
            background-image: 
                linear-gradient(rgba(0,0,0,.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,.05) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        #svg-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .table-card {
            position: absolute;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            min-width: 280px;
            max-width: 320px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: move;
            z-index: 10;
            transition: box-shadow 0.3s;
        }

        .table-card:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .table-card.dragging {
            opacity: 0.8;
            z-index: 100;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .table-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 15px;
            border-radius: 6px 6px 0 0;
            font-weight: bold;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-name {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .table-icon {
            font-size: 1.2em;
        }

        .table-body {
            padding: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .field {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 6px 8px;
            border-bottom: 1px dotted #dee2e6;
            font-size: 0.9em;
            gap: 10px;
        }

        .field:last-child {
            border-bottom: none;
        }

        .field-left {
            flex: 1;
            min-width: 0;
        }

        .field-name {
            color: #495057;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .field-comment {
            color: #6c757d;
            font-size: 0.85em;
            margin-top: 2px;
            font-style: italic;
        }

        .field-type {
            color: #6c757d;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .field-key {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.75em;
            font-weight: bold;
            white-space: nowrap;
        }

        .pk {
            background: #ff6b6b;
            color: white;
        }

        .fk {
            background: #4ecdc4;
            color: white;
        }

        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            font-size: 0.85em;
        }

        .legend-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            display: inline-block;
        }

        .connection-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #667eea;
            border: 2px solid white;
            border-radius: 50%;
            z-index: 20;
            pointer-events: all;
            cursor: crosshair;
        }

        .connection-point:hover {
            background: #ff6b6b;
            transform: scale(1.3);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ—„ï¸ AIå®æ—¶è¯­éŸ³è½¬å†™åº”ç”¨ - æ•°æ®åº“ERå›¾</h1>
        <p class="subtitle">å¯æ‹–æ‹½çš„äº¤äº’å¼ERå›¾ | ç‚¹å‡»è¡¨å¡ç‰‡å¯æ‹–åŠ¨ä½ç½®</p>
    </div>

    <div class="controls">
        <button onclick="resetPositions()">é‡ç½®ä½ç½®</button>
        <button onclick="autoLayout()">è‡ªåŠ¨å¸ƒå±€</button>
        <button onclick="toggleConnections()">æ˜¾ç¤º/éšè—è¿çº¿</button>
        <span style="margin-left: 20px; color: #666;">ğŸ’¡ æç¤ºï¼šæ‹–åŠ¨è¡¨å¡ç‰‡å¯ä»¥è°ƒæ•´ä½ç½®ï¼Œè¿çº¿ä¼šè‡ªåŠ¨æ›´æ–°</span>
    </div>

    <div class="canvas-container">
        <div id="canvas">
            <svg id="svg-lines"></svg>
            
            <!-- Users Table -->
            <div class="table-card" id="table-users" style="left: 50px; top: 50px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ‘¤</span>
                        <span>users</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">ç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">email</div>
                            <div class="field-comment">é‚®ç®±ï¼ˆç™»å½•è´¦å·ï¼Œå”¯ä¸€ï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(255)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">password</div>
                            <div class="field-comment">å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(255)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">name</div>
                            <div class="field-comment">ç”¨æˆ·å§“å</div>
                        </div>
                        <div class="field-type">VARCHAR(100)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">avatar</div>
                            <div class="field-comment">å¤´åƒURL</div>
                        </div>
                        <div class="field-type">VARCHAR(500)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">phone</div>
                            <div class="field-comment">æ‰‹æœºå·</div>
                        </div>
                        <div class="field-type">VARCHAR(20)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">subscription</div>
                            <div class="field-comment">è®¢é˜…ç±»å‹ï¼ˆfree/proï¼‰</div>
                        </div>
                        <div class="field-type">ENUM</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">subscription_expires_at</div>
                            <div class="field-comment">è®¢é˜…è¿‡æœŸæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">storage_used</div>
                            <div class="field-comment">å·²ä½¿ç”¨å­˜å‚¨ï¼ˆå­—èŠ‚ï¼‰</div>
                        </div>
                        <div class="field-type">BIGINT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">storage_limit</div>
                            <div class="field-comment">å­˜å‚¨é™åˆ¶ï¼ˆå­—èŠ‚ï¼‰</div>
                        </div>
                        <div class="field-type">BIGINT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">settings</div>
                            <div class="field-comment">ç”¨æˆ·è®¾ç½®ï¼ˆJSONï¼‰</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">oauth</div>
                            <div class="field-comment">OAuthç™»å½•ä¿¡æ¯</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">updated_at</div>
                            <div class="field-comment">æ›´æ–°æ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>

            <!-- Meetings Table -->
            <div class="table-card" id="table-meetings" style="left: 400px; top: 50px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ“…</span>
                        <span>meetings</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                user_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ç”¨æˆ·IDï¼ˆå¤–é”®â†’users.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">title</div>
                            <div class="field-comment">ä¼šè®®æ ‡é¢˜</div>
                        </div>
                        <div class="field-type">VARCHAR(200)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">description</div>
                            <div class="field-comment">ä¼šè®®æè¿°</div>
                        </div>
                        <div class="field-type">TEXT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">duration</div>
                            <div class="field-comment">ä¼šè®®æ—¶é•¿ï¼ˆç§’ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">start_time</div>
                            <div class="field-comment">å¼€å§‹æ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">end_time</div>
                            <div class="field-comment">ç»“æŸæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">audio_url</div>
                            <div class="field-comment">éŸ³é¢‘æ–‡ä»¶URL</div>
                        </div>
                        <div class="field-type">VARCHAR(500)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">audio_size</div>
                            <div class="field-comment">éŸ³é¢‘æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</div>
                        </div>
                        <div class="field-type">BIGINT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">status</div>
                            <div class="field-comment">çŠ¶æ€ï¼ˆrecording/completed/archivedï¼‰</div>
                        </div>
                        <div class="field-type">ENUM</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">summary</div>
                            <div class="field-comment">ä¼šè®®æ€»ç»“ï¼ˆJSONï¼‰</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">tags</div>
                            <div class="field-comment">æ ‡ç­¾åˆ—è¡¨ï¼ˆJSONæ•°ç»„ï¼‰</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">speakers</div>
                            <div class="field-comment">å‘è¨€äººåˆ—è¡¨ï¼ˆJSONï¼‰</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">participants</div>
                            <div class="field-comment">å‚ä¸è€…åˆ—è¡¨ï¼ˆJSONï¼‰</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">is_archived</div>
                            <div class="field-comment">æ˜¯å¦å·²å½’æ¡£</div>
                        </div>
                        <div class="field-type">BOOLEAN</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">is_shared</div>
                            <div class="field-comment">æ˜¯å¦å·²åˆ†äº«</div>
                        </div>
                        <div class="field-type">BOOLEAN</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">share_token</div>
                            <div class="field-comment">åˆ†äº«ä»¤ç‰Œï¼ˆå”¯ä¸€ï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(100)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">updated_at</div>
                            <div class="field-comment">æ›´æ–°æ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>

            <!-- Transcripts Table -->
            <div class="table-card" id="table-transcripts" style="left: 750px; top: 50px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ“</span>
                        <span>transcripts</span>
                        <span style="font-size: 0.7em; margin-left: 8px; opacity: 0.9;">âš ï¸ å¤§æ•°æ®é‡è¡¨</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">è½¬å†™IDï¼ˆä¸»é”®ï¼ŒBIGINTæ”¯æŒå¤§é‡æ•°æ®ï¼‰</div>
                        </div>
                        <div class="field-type">BIGINT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                meeting_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆå¤–é”®â†’meetings.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">text</div>
                            <div class="field-comment">è½¬å†™æ–‡æœ¬å†…å®¹ï¼ˆå•æ¡å»ºè®®â‰¤64KBï¼‰</div>
                        </div>
                        <div class="field-type">TEXT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">timestamp</div>
                            <div class="field-comment">æ—¶é—´æˆ³ï¼ˆç§’ï¼Œä»ä¼šè®®å¼€å§‹ç®—èµ·ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">speaker_id</div>
                            <div class="field-comment">å‘è¨€äººIDï¼ˆå¤šäººè¯†åˆ«ï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(50)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">speaker_name</div>
                            <div class="field-comment">å‘è¨€äººå§“åï¼ˆå†—ä½™å­—æ®µï¼Œé¿å…JOINï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(100)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">is_highlighted</div>
                            <div class="field-comment">æ˜¯å¦é«˜äº®ï¼ˆç”¨æˆ·æ ‡è®°ï¼‰</div>
                        </div>
                        <div class="field-type">BOOLEAN</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">confidence</div>
                            <div class="field-comment">è¯†åˆ«ç½®ä¿¡åº¦ï¼ˆ0.00-1.00ï¼‰</div>
                        </div>
                        <div class="field-type">DECIMAL(5,2)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´ï¼ˆç”¨äºå½’æ¡£ï¼‰</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div style="margin-top: 10px; padding: 8px; background: #fff3cd; border-left: 3px solid #ffc107; border-radius: 4px; font-size: 0.85em; color: #856404;">
                        <strong>ä¼˜åŒ–ç­–ç•¥ï¼š</strong><br>
                        â€¢ å¤åˆç´¢å¼•ï¼š(meeting_id, timestamp)<br>
                        â€¢ å‹ç¼©å­˜å‚¨ï¼šROW_FORMAT=COMPRESSED<br>
                        â€¢ å®šæœŸå½’æ¡£ï¼š6ä¸ªæœˆå‰çš„æ•°æ®è¿ç§»åˆ°å½’æ¡£è¡¨<br>
                        â€¢ æ‰¹é‡æ’å…¥ï¼šæ¯æ¬¡100-1000æ¡
                    </div>
                </div>
            </div>

            <!-- Transcripts Archive Table -->
            <div class="table-card" id="table-transcripts_archive" style="left: 750px; top: 350px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ“¦</span>
                        <span>transcripts_archive</span>
                        <span style="font-size: 0.7em; margin-left: 8px; opacity: 0.9;">å½’æ¡£è¡¨</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">è½¬å†™IDï¼ˆä¸»é”®ï¼ŒBIGINTï¼‰</div>
                        </div>
                        <div class="field-type">BIGINT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                meeting_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆå¤–é”®â†’meetings.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">text</div>
                            <div class="field-comment">è½¬å†™æ–‡æœ¬å†…å®¹</div>
                        </div>
                        <div class="field-type">TEXT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">timestamp</div>
                            <div class="field-comment">æ—¶é—´æˆ³ï¼ˆç§’ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">speaker_id</div>
                            <div class="field-comment">å‘è¨€äººID</div>
                        </div>
                        <div class="field-type">VARCHAR(50)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">speaker_name</div>
                            <div class="field-comment">å‘è¨€äººå§“å</div>
                        </div>
                        <div class="field-type">VARCHAR(100)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">is_highlighted</div>
                            <div class="field-comment">æ˜¯å¦é«˜äº®</div>
                        </div>
                        <div class="field-type">BOOLEAN</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">confidence</div>
                            <div class="field-comment">è¯†åˆ«ç½®ä¿¡åº¦</div>
                        </div>
                        <div class="field-type">DECIMAL(5,2)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åŸå§‹åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">archived_at</div>
                            <div class="field-comment">å½’æ¡£æ—¶é—´ï¼ˆåˆ†åŒºå­—æ®µï¼‰</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div style="margin-top: 10px; padding: 8px; background: #e7f3ff; border-left: 3px solid #4dabf7; border-radius: 4px; font-size: 0.85em; color: #1971c2;">
                        <strong>å½’æ¡£è¯´æ˜ï¼š</strong><br>
                        â€¢ å­˜å‚¨6ä¸ªæœˆå‰çš„è½¬å†™æ•°æ®<br>
                        â€¢ æŒ‰æœˆåˆ†åŒºï¼Œä¾¿äºç®¡ç†<br>
                        â€¢ å‹ç¼©å­˜å‚¨ï¼ŒèŠ‚çœç©ºé—´<br>
                        â€¢ å®šæœŸæ¸…ç†12ä¸ªæœˆå‰çš„æ•°æ®
                    </div>
                </div>
            </div>

            <!-- Summary Snapshots Table -->
            <div class="table-card" id="table-summary_snapshots" style="left: 1100px; top: 50px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ“Š</span>
                        <span>summary_snapshots</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">å¿«ç…§IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                meeting_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆå¤–é”®â†’meetings.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">snapshot_type</div>
                            <div class="field-comment">å¿«ç…§ç±»å‹ï¼ˆrealtime/finalï¼‰</div>
                        </div>
                        <div class="field-type">ENUM</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">summary_data</div>
                            <div class="field-comment">æ€»ç»“æ•°æ®ï¼ˆJSONï¼‰</div>
                        </div>
                        <div class="field-type">JSON</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">transcript_count</div>
                            <div class="field-comment">è½¬å†™æ¡æ•°</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">transcript_length</div>
                            <div class="field-comment">è½¬å†™æ–‡æœ¬æ€»é•¿åº¦</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>

            <!-- Tags Table -->
            <div class="table-card" id="table-tags" style="left: 50px; top: 450px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ·ï¸</span>
                        <span>tags</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">æ ‡ç­¾IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                user_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ç”¨æˆ·IDï¼ˆå¤–é”®â†’users.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">name</div>
                            <div class="field-comment">æ ‡ç­¾åç§°</div>
                        </div>
                        <div class="field-type">VARCHAR(50)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">color</div>
                            <div class="field-comment">æ ‡ç­¾é¢œè‰²</div>
                        </div>
                        <div class="field-type">VARCHAR(20)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">icon</div>
                            <div class="field-comment">æ ‡ç­¾å›¾æ ‡</div>
                        </div>
                        <div class="field-type">VARCHAR(50)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">usage_count</div>
                            <div class="field-comment">ä½¿ç”¨æ¬¡æ•°</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">updated_at</div>
                            <div class="field-comment">æ›´æ–°æ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>

            <!-- Meeting Tags Table -->
            <div class="table-card" id="table-meeting_tags" style="left: 400px; top: 450px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ”—</span>
                        <span>meeting_tags</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">å…³è”IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                meeting_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆå¤–é”®â†’meetings.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                tag_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">æ ‡ç­¾IDï¼ˆå¤–é”®â†’tags.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>

            <!-- Files Table -->
            <div class="table-card" id="table-files" style="left: 750px; top: 450px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ“</span>
                        <span>files</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">æ–‡ä»¶IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                user_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ç”¨æˆ·IDï¼ˆå¤–é”®â†’users.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                meeting_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆå¤–é”®â†’meetings.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">filename</div>
                            <div class="field-comment">æ–‡ä»¶å</div>
                        </div>
                        <div class="field-type">VARCHAR(255)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">original_name</div>
                            <div class="field-comment">åŸå§‹æ–‡ä»¶å</div>
                        </div>
                        <div class="field-type">VARCHAR(255)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">mime_type</div>
                            <div class="field-comment">MIMEç±»å‹</div>
                        </div>
                        <div class="field-type">VARCHAR(100)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">size</div>
                            <div class="field-comment">æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</div>
                        </div>
                        <div class="field-type">BIGINT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">url</div>
                            <div class="field-comment">æ–‡ä»¶è®¿é—®URL</div>
                        </div>
                        <div class="field-type">VARCHAR(500)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">storage_type</div>
                            <div class="field-comment">å­˜å‚¨ç±»å‹ï¼ˆminio/s3ï¼‰</div>
                        </div>
                        <div class="field-type">ENUM</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">storage_key</div>
                            <div class="field-comment">å­˜å‚¨é”®ï¼ˆå¯¹è±¡å­˜å‚¨keyï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(500)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">is_public</div>
                            <div class="field-comment">æ˜¯å¦å…¬å¼€</div>
                        </div>
                        <div class="field-type">BOOLEAN</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>

            <!-- Shares Table -->
            <div class="table-card" id="table-shares" style="left: 1100px; top: 450px;">
                <div class="table-header">
                    <div class="table-name">
                        <span class="table-icon">ğŸ”—</span>
                        <span>shares</span>
                    </div>
                </div>
                <div class="table-body">
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                id <span class="field-key pk">PK</span>
                            </div>
                            <div class="field-comment">åˆ†äº«IDï¼ˆä¸»é”®ï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                meeting_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ä¼šè®®IDï¼ˆå¤–é”®â†’meetings.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">
                                user_id <span class="field-key fk">FK</span>
                            </div>
                            <div class="field-comment">ç”¨æˆ·IDï¼ˆå¤–é”®â†’users.idï¼‰</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">token</div>
                            <div class="field-comment">åˆ†äº«ä»¤ç‰Œï¼ˆå”¯ä¸€ï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(100)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">password</div>
                            <div class="field-comment">è®¿é—®å¯†ç ï¼ˆåŠ å¯†ï¼‰</div>
                        </div>
                        <div class="field-type">VARCHAR(255)</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">expires_at</div>
                            <div class="field-comment">è¿‡æœŸæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">access_count</div>
                            <div class="field-comment">è®¿é—®æ¬¡æ•°</div>
                        </div>
                        <div class="field-type">INT</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">is_active</div>
                            <div class="field-comment">æ˜¯å¦æ¿€æ´»</div>
                        </div>
                        <div class="field-type">BOOLEAN</div>
                    </div>
                    <div class="field">
                        <div class="field-left">
                            <div class="field-name">created_at</div>
                            <div class="field-comment">åˆ›å»ºæ—¶é—´</div>
                        </div>
                        <div class="field-type">DATETIME</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-title">å›¾ä¾‹</div>
            <div class="legend-item">
                <span class="legend-color" style="background: #ff6b6b;"></span>
                <span>ä¸»é”® (PK)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #4ecdc4;"></span>
                <span>å¤–é”® (FK)</span>
            </div>
            <div class="legend-item">
                <span style="color: #667eea;">â”â”â”</span>
                <span>ä¸€å¯¹å¤šå…³ç³»</span>
            </div>
            <div class="legend-item">
                <span style="color: #ff9800;">â” â” â”</span>
                <span>å½’æ¡£å…³ç³»</span>
            </div>
        </div>
    </div>

    <script>
        // è¡¨å…³ç³»å®šä¹‰
        const relationships = [
            { from: 'table-users', to: 'table-meetings', fromField: 'id', toField: 'user_id', type: '1:N' },
            { from: 'table-meetings', to: 'table-transcripts', fromField: 'id', toField: 'meeting_id', type: '1:N', note: 'âš ï¸ å¤§æ•°æ®é‡' },
            { from: 'table-transcripts', to: 'table-transcripts_archive', fromField: 'id', toField: 'id', type: 'å½’æ¡£', note: 'ğŸ“¦ 6ä¸ªæœˆå' },
            { from: 'table-meetings', to: 'table-transcripts_archive', fromField: 'id', toField: 'meeting_id', type: '1:N' },
            { from: 'table-meetings', to: 'table-summary_snapshots', fromField: 'id', toField: 'meeting_id', type: '1:N' },
            { from: 'table-users', to: 'table-tags', fromField: 'id', toField: 'user_id', type: '1:N' },
            { from: 'table-meetings', to: 'table-meeting_tags', fromField: 'id', toField: 'meeting_id', type: '1:N' },
            { from: 'table-tags', to: 'table-meeting_tags', fromField: 'id', toField: 'tag_id', type: '1:N' },
            { from: 'table-users', to: 'table-files', fromField: 'id', toField: 'user_id', type: '1:N' },
            { from: 'table-meetings', to: 'table-files', fromField: 'id', toField: 'meeting_id', type: '1:N' },
            { from: 'table-meetings', to: 'table-shares', fromField: 'id', toField: 'meeting_id', type: '1:N' },
            { from: 'table-users', to: 'table-shares', fromField: 'id', toField: 'user_id', type: '1:N' }
        ];

        let showConnections = true;
        let draggedElement = null;
        let offset = { x: 0, y: 0 };

        // åˆå§‹åŒ–æ‹–æ‹½åŠŸèƒ½
        function initDrag() {
            const tables = document.querySelectorAll('.table-card');
            tables.forEach(table => {
                table.addEventListener('mousedown', startDrag);
            });
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', endDrag);
        }

        function startDrag(e) {
            if (e.target.closest('.table-header')) {
                draggedElement = e.currentTarget;
                const rect = draggedElement.getBoundingClientRect();
                const canvasRect = document.getElementById('canvas').getBoundingClientRect();
                offset.x = e.clientX - rect.left - canvasRect.left + document.getElementById('canvas').scrollLeft;
                offset.y = e.clientY - rect.top - canvasRect.top + document.getElementById('canvas').scrollTop;
                draggedElement.classList.add('dragging');
                e.preventDefault();
            }
        }

        function drag(e) {
            if (draggedElement) {
                const canvas = document.getElementById('canvas');
                const canvasRect = canvas.getBoundingClientRect();
                const x = e.clientX - canvasRect.left + canvas.scrollLeft - offset.x;
                const y = e.clientY - canvasRect.top + canvas.scrollTop - offset.y;
                
                draggedElement.style.left = Math.max(0, x) + 'px';
                draggedElement.style.top = Math.max(0, y) + 'px';
                
                updateConnections();
            }
        }

        function endDrag() {
            if (draggedElement) {
                draggedElement.classList.remove('dragging');
                draggedElement = null;
            }
        }

        // æ›´æ–°è¿æ¥çº¿
        function updateConnections() {
            if (!showConnections) {
                document.getElementById('svg-lines').innerHTML = '';
                return;
            }

            const svg = document.getElementById('svg-lines');
            svg.innerHTML = '';

            relationships.forEach(rel => {
                const fromTable = document.getElementById(rel.from);
                const toTable = document.getElementById(rel.to);
                
                if (!fromTable || !toTable) return;

                const fromRect = fromTable.getBoundingClientRect();
                const toRect = toTable.getBoundingClientRect();
                const canvasRect = document.getElementById('canvas').getBoundingClientRect();
                const scrollLeft = document.getElementById('canvas').scrollLeft;
                const scrollTop = document.getElementById('canvas').scrollTop;

                // è®¡ç®—è¿æ¥ç‚¹ä½ç½®ï¼ˆè¡¨çš„å³ä¾§å’Œå·¦ä¾§ä¸­å¿ƒï¼‰
                const fromX = fromRect.right - canvasRect.left + scrollLeft;
                const fromY = fromRect.top - canvasRect.top + scrollTop + fromRect.height / 2;
                const toX = toRect.left - canvasRect.left + scrollLeft;
                const toY = toRect.top - canvasRect.top + scrollTop + toRect.height / 2;

                // ç»˜åˆ¶è¿æ¥çº¿
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', fromX);
                line.setAttribute('y1', fromY);
                line.setAttribute('x2', toX);
                line.setAttribute('y2', toY);
                
                // å½’æ¡£å…³ç³»ä½¿ç”¨ä¸åŒçš„é¢œè‰²å’Œæ ·å¼
                if (rel.type === 'å½’æ¡£') {
                    line.setAttribute('stroke', '#ff9800');
                    line.setAttribute('stroke-width', '2');
                    line.setAttribute('stroke-dasharray', '5,5');
                    line.style.opacity = '0.8';
                } else {
                    line.setAttribute('stroke', '#667eea');
                    line.setAttribute('stroke-width', '2');
                    line.setAttribute('marker-end', 'url(#arrowhead)');
                    line.style.opacity = '0.6';
                }
                svg.appendChild(line);

                // æ·»åŠ å…³ç³»æ ‡ç­¾
                const midX = (fromX + toX) / 2;
                const midY = (fromY + toY) / 2;
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', midX);
                text.setAttribute('y', midY - 5);
                text.setAttribute('fill', rel.type === 'å½’æ¡£' ? '#ff9800' : '#667eea');
                text.setAttribute('font-size', '12px');
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('font-weight', 'bold');
                text.textContent = rel.type + (rel.note ? ' ' + rel.note : '');
                svg.appendChild(text);
            });

            // æ·»åŠ ç®­å¤´æ ‡è®°å®šä¹‰
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
            marker.setAttribute('id', 'arrowhead');
            marker.setAttribute('markerWidth', '10');
            marker.setAttribute('markerHeight', '10');
            marker.setAttribute('refX', '9');
            marker.setAttribute('refY', '3');
            marker.setAttribute('orient', 'auto');
            const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            polygon.setAttribute('points', '0 0, 10 3, 0 6');
            polygon.setAttribute('fill', '#667eea');
            marker.appendChild(polygon);
            defs.appendChild(marker);
            svg.appendChild(defs);
        }

        // é‡ç½®ä½ç½®
        function resetPositions() {
            const positions = {
                'table-users': { left: 50, top: 50 },
                'table-meetings': { left: 400, top: 50 },
                'table-transcripts': { left: 750, top: 50 },
                'table-summary_snapshots': { left: 1100, top: 50 },
                'table-tags': { left: 50, top: 450 },
                'table-meeting_tags': { left: 400, top: 450 },
                'table-transcripts_archive': { left: 750, top: 350 },
                'table-files': { left: 1100, top: 450 },
                'table-shares': { left: 1450, top: 450 }
            };

            Object.keys(positions).forEach(id => {
                const table = document.getElementById(id);
                if (table) {
                    table.style.left = positions[id].left + 'px';
                    table.style.top = positions[id].top + 'px';
                }
            });
            updateConnections();
        }

        // è‡ªåŠ¨å¸ƒå±€
        function autoLayout() {
            const layout = {
                'table-users': { left: 50, top: 100 },
                'table-meetings': { left: 400, top: 100 },
                'table-transcripts': { left: 750, top: 100 },
                'table-summary_snapshots': { left: 1100, top: 100 },
                'table-tags': { left: 50, top: 500 },
                'table-meeting_tags': { left: 400, top: 500 },
                'table-transcripts_archive': { left: 750, top: 400 },
                'table-files': { left: 1100, top: 500 },
                'table-shares': { left: 1450, top: 500 }
            };

            Object.keys(layout).forEach(id => {
                const table = document.getElementById(id);
                if (table) {
                    table.style.transition = 'all 0.5s ease';
                    table.style.left = layout[id].left + 'px';
                    table.style.top = layout[id].top + 'px';
                    setTimeout(() => {
                        table.style.transition = '';
                    }, 500);
                }
            });
            setTimeout(updateConnections, 500);
        }

        // åˆ‡æ¢è¿æ¥çº¿æ˜¾ç¤º
        function toggleConnections() {
            showConnections = !showConnections;
            updateConnections();
        }

        // ç›‘å¬çª—å£å¤§å°å˜åŒ–å’Œæ»šåŠ¨
        window.addEventListener('resize', updateConnections);
        document.getElementById('canvas').addEventListener('scroll', updateConnections);

        // åˆå§‹åŒ–
        initDrag();
        updateConnections();

        // å®šæœŸæ›´æ–°è¿æ¥çº¿ï¼ˆå¤„ç†æ»šåŠ¨ç­‰æƒ…å†µï¼‰
        setInterval(updateConnections, 100);
    </script>
</body>
</html>